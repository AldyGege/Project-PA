<%- include('../partials/__head.ejs') %>
<body>
<div class="container-scroller d-flex align-items-center justify-content-center" style="min-height: 100vh;">
    <div class="main-panel w-100">
        <div class="content-wrapper d-flex align-items-center justify-content-center">
            <div class="col-md-8 grid-margin stretch-card">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Edit Data Siswa</h4>
                        <form action="/siswa/update/<%= id %>" method="POST" enctype="multipart/form-data" class="forms-sample">
                            <div class="form-group">
                                <label for="gambar_siswa">Foto Siswa</label>
                                <input type="file" class="form-control" id="gambar_siswa" name="gambar_siswa">
                                <% if (data.gambar_siswa) { %>
                                    <img 
                                        src="/images/<%= data.jalur_daftar === 'online' ? 'pendaftaran' : 'siswa' %>/<%= data.gambar_siswa %>" 
                                        height="100" width="150" 
                                        style="object-fit: cover; border-radius: 6px;" 
                                        alt="Foto Lama"/>
                                <% } else { %>
                                    <p class="text-muted">Tidak ada foto</p>
                                <% } %>
                            </div>

                            <div class="form-group">
                                <label for="nama_siswa">Nama Siswa</label>
                                <input type="text" class="form-control" id="nama_siswa" name="nama_siswa" value="<%= data.nama_siswa %>" required>
                            </div>

                            <div class="form-group">
                                <label for="nik">NIK</label>
                                <input type="text" class="form-control" id="nik" name="nik" value="<%= data.nik %>">
                            </div>

                            <div class="form-group">
                                <label for="alamat_siswa">Alamat</label>
                                <input type="text" class="form-control" id="alamat_siswa" name="alamat_siswa" value="<%= data.alamat_siswa %>" required>
                            </div>

                            <div class="form-group">
                                <label for="ttl">Tempat Tanggal Lahir</label>
                                <input type="text" class="form-control" id="ttl" name="ttl" value="<%= data.ttl %>" required>
                            </div>

                            <div class="form-group">
                                <label for="gender">Gender</label>
                                <select class="form-control" id="gender" name="gender" required>
                                    <option value="Pria" <%= data.gender === 'Laki-laki' ? 'selected' : '' %>>Laki-laki</option>
                                    <option value="Wanita" <%= data.gender === 'Perempuan' ? 'selected' : '' %>>Perempuan</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="nama_ortu_siswa">Nama Orang Tua</label>
                                <input type="text" class="form-control" id="nama_ortu_siswa" name="nama_ortu_siswa" value="<%= data.nama_ortu_siswa %>" required>
                            </div>

                            <div class="form-group">
                                <label for="no_telp_ortu_siswa">No Telp Orang Tua</label>
                                <input type="text" class="form-control" id="no_telp_ortu_siswa" name="no_telp_ortu_siswa" value="<%= data.no_telp_ortu_siswa %>">
                            </div>

                            <div class="form-group">
                                <label for="pekerjaan_ortu_siswa">Pekerjaan Orang Tua</label>
                                <input type="text" class="form-control" id="pekerjaan_ortu_siswa" name="pekerjaan_ortu_siswa" value="<%= data.pekerjaan_ortu_siswa %>" required>
                            </div>

                            <div class="form-group">
                                <label for="alamat_ortu_siswa">Alamat Orang Tua</label>
                                <input type="text" class="form-control" id="alamat_ortu_siswa" name="alamat_ortu_siswa" value="<%= data.alamat_ortu_siswa %>" required>
                            </div>
                            <button type="submit" class="btn btn-primary mr-2">Simpan</button>
                            <button type="button" class="btn btn-light" onclick="history.back()">Cancel</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<%- include('../partials/__foot.ejs') %>
</body>
